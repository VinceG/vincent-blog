---
title: "HipHop PHP - לזוז מהר?"
date: 2010-02-07 12:40:45
---

<h1>אז מה זה HIPHOP PHP?</h1>
HipHop PHP היא לא קומפיילר בעצמו. אלה בעצם מתרגם קוד PHP. זאת אומרת ש HIPHOP מתרגם את קוד ה PHP שנכתב לקוד הכתוב ב C++ בצורה אופטימלית מאוד ואז משתמש ב G++ כדי לקמפל אותו.
HIPHOP מריץ את קוד המקור בסדר סמנטי ומקריב כמה אפשרויות אשר קיימות ב PHP שמשתמשים בהם לעיתים רחוקות - לדוגמא eval() לטובת ביצועים טובים יותר.
HIPHOP כולל מתרגם קוד, אשר מיישם את מה שהשרת מבצע בעת שהוא מריץ קוד PHP רגיל, ושכתוב של כמה תוספות נפוצות של PHP כדי שיהיה ניתן לנצל את הביצועים של HIPHOP.
<h1>PHP כשפת צד שרת (סקריפט)</h1>
המקור של PHP כ<a href="http://en.wikipedia.org/wiki/Server-side_scripting" target="_blank">שפת צד שרת</a> דומה לשפות כמו perl, python, ruby אשר לכולם יש את יתרון הפיתוח המהיר על ידי המתכנת והאפשרות לקפוץ בין סוגים שונים של סביבות פיתוח ועבודה. לרוב זה משתווה אל מול <a href="http://en.wikipedia.org/wiki/Compiled_language" target="_blank">שפות פיתוח מסורתיים</a> כמו C++ או <a href="http://en.wikipedia.org/wiki/Interpreted_language" target="_blank">שפות פיתוח מפרשות</a> כמו JAVA. מצד אחר שפות צד שרת ידועות בזה שהם פחות יעילות מבחינת צריכת משאבים, CPU, וזכרון של השרת. לכן זהו אתגר לאתרים גדולים לנסות ולשמור על מהירות ויעילות המערכת שלהם אשר כתובה בשפת צד שרת.

דרך אחת לפתור בעיה זו היא לכתוב את רוב החלקים הבעייתים הכתובים ב PHP ישירות ב C++ כתוספות ל PHP. שיטה זו הופכת את מרבית הקוד של PHP למעין גשר בין הקוד HTML שלכם אשר מציג את תוכן האתר ללוגיקה של המערכת הכתובה ב C++. מנקודת מבט טכנית זה עובד מצויין, אבל מפחית בצורה משמעותית את מספר המתכנתים אשר יכולים לעבוד על האפליקציה. לימוד שפת C++ היא רק חלק אחד וראשון לכתיבת תוספות ל PHP השני הוא להבין את <a href="http://theserverpages.com/php/manual/en/zend.php">Zend API</a>. מאחר ויש הרבה יותר מתכנתים אשר עובדים עם שפות צד שרת פתרון זה הופך להיות יקר יותר ולא יעיל במיוחד לחברות קטנות, אלו שרק התחילו וחברות שברשותם רק מתכנתי צד שרת.
<h1>HIPHOP המקור</h1>
HIPHOP לראשונה נכתב לפני כמה שנים ב FACEBOOK, הם התחילו בזה שהם הפכו חלקי קוד PHP ל C++. השפות דומות מבחינה סינטטית, ו C++ הרבה יותר יעיל מ PHP כזה נוגע לצריכת זכרון ו CPU. למי שלא יודע PHP במקור כתובה ב C. הם ידעו שאי אפשר יהיה לכתוב את כל המערכת אשר כתובה ב 90% ב PHP ל C++, אבל תהו אם יהיה ניתן להמיר את קוד ה PHP ל C++ בעזרת תוכנה.

מציאת דרכים חדשות לשפר את ביצועי שפת ה PHP אינו דבר חדש. בזמן הרצה המנוע של ZEND הופך את קוד המקור של PHP לקוד שנקרא <a href="http://en.wikipedia.org/wiki/Opcode" target="_blank">opcode </a>לאחר מכן זה עובר דרך <a href="http://en.wikipedia.org/wiki/Zend_Engine" target="_blank">Zend Engine.</a> פרויקטים אשר נכתבו תחת קוד פתוח כמו <a href="http://pecl.php.net/package/APC">APC</a> and <a href="http://eaccelerator.net/">eAccelerator </a>נועדו כדי לשמור את הפלט של קוד ה PHP ולשמור אותו במטמון ומשתמשים בהם בהרבה אתרים כיום ברשת כדי לזרז את תהליך טעינת העמוד. בנוסף ישנו את ה <a href="http://en.wikipedia.org/wiki/Zend_Server">Zend Server</a> ,מוצר בתשלום אשר מריץ מערכות הכתובת ב PHP בצורה מהירה שכבר כל המודלים הנחוצים כלולים בו. במקום הם חשבו להפוך את קוד המקור של PHP ישירות ל C++ ולאחר מכן יהיה ניתן להשתמש בו כשפת מחשב רגילה. גם קומפילציה של PHP אינו רעיון חדש, פרוייקטים בקוד פתוח כמו <a href="http://www.roadsend.com/">Roadsend</a> ו <a href="http://www.phpcompiler.org/">phc</a> מקמפלים קוד PHP ל C,<a href="http://www.phpcompiler.org/"> </a>בנוסף <a href="http://www.caucho.com/resin-3.0/quercus/">Quercus</a> מקמפל קוד PHP ל JAVA, ו <a href="http://www.php-compiler.net/">Phalanger</a> מקמפל קוד PHP ל NET. .

לאחר שמונה חודשים, היה לצוות המהנדסים בפייסבוק מספיק קוד כדי להציג שדרך זו מריצה את הקוד מהר יותר. למעלה משנה מאוחר יותר הם החלו להשתמש בשיטה זו בשרתים שלהם וראו שיפור ניכר במהירות ובביצועים של האתר כש HIPHOP נכנס לתמונה. כיום 90% מהשרתים של פייסבוק עובדים תחת HIPHOP.
<h1>כיצד זה עובד?</h1>
בעקרון האתגר העיקרי יהיה לגשר בין הפער הניכר בין PHP ו C++. בכל זאת PHP הינה שפת צד שרת עם כתיבה דינאמית. C++ הינה שפת מחשב עם עם כתיבה סטטית.

תהליך ההמרה כולל את השלבים הבאים:
<ol>
	<li>נתוח סטטי של הקוד, איפה שאוספים מידע לגבי מי מגדיר מה ותחת איזו תלות,</li>
	<li>הסקה איפה שנבחר סוג הנתון, ב C++ <a href="http://he.wikipedia.org/wiki/%D7%A1%D7%A7%D7%9C%D7%A8_%28%D7%9E%D7%AA%D7%9E%D7%98%D7%99%D7%A7%D7%94%29" target="_blank">סקלר</a>, בין סטרינג, מערך, אובייקט, מחלקה ואחרים, ו,</li>
	<li>המרת הקוד, שברוב המקרים זהו תהליך ההופך ביטויים ב PHP לביטויים ב C++.</li>
</ol>
<strong>תרשים:</strong>
<p style="text-align: center;"><img class="aligncenter" title="תהליך ההמרה" src="http://wiki.developers.facebook.com/images/2/23/HipHop_transformation_process.png" alt="" width="717" height="448" /></p>
לסיכום HIPHOP מאפשר להשתמש בהיבטים של PHP תוך שימוש ביתרונות היעילות והביצועים של C++. בגדול HIPHOP נכתב בלמעלה מ 300,000 שורות קוד, ולמעלה מ 5,000 בדיקות נעשו.
<h1>איפה מתחילים בשימוש של זה?</h1>
נכון לעכשיו (07.02.10) לא ניתן להוריד עדיין את קוד המקור של HIPHOP אבל ברגע שהוא יעלה תוכלו למצוא אותו <a href="http://developers.facebook.com/hiphop-php/" target="_blank">באתר הבית של HIPHOP בפייסבוק</a>, כמו כן מומלץ אך לא חייב להצטרף לרשימת התפוצה של HIPHOP בגוגל כדי לקבל מידע, עזרה בנושא זה ברגע שיהיה ניתן להוריד ולהשתמש בתוסף.

כדי להצטרף לרשימה <a href="http://groups.google.com/group/hiphop-php-dev" target="_blank">בקרו באתר הזה.</a>
